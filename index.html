<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ë³¸ì–´ í•™ìŠµ ë„ìš°ë¯¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }
        .tab-btn.active {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .hiragana-grid-container {
            display: grid;
            grid-template-columns: repeat(5, minmax(0, 1fr));
            gap: 0.5rem;
            text-align: center;
        }
        .yoon-grid-container {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 0.5rem;
            text-align: center;
        }
        .quiz-option.correct {
            background-color: #22c55e; /* green-500 */
            color: white;
            border-color: #16a34a; /* green-600 */
        }
        .quiz-option.incorrect {
            background-color: #ef4444; /* red-500 */
            color: white;
            border-color: #dc2626; /* red-600 */
        }
        .quiz-option:disabled {
            opacity: 0.8;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-600">ì¼ë³¸ì–´ í•™ìŠµ ë„ìš°ë¯¸</h1>
            <p class="mt-2 text-lg text-gray-600">ì´ë¯¸ì§€ì™€ í•„ê¸° ì† ë‹¨ì–´, ë¬¸ì¥, ë¬¸í™” ì •ë³´ë¥¼ ì •ë¦¬í–ˆì–´ìš”.</p>
        </header>

        <!-- Tab Navigation -->
        <div class="mb-6 border-b border-gray-200">
            <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                <button onclick="changeTab('vocab')" class="tab-btn active text-lg font-semibold border-b-2 border-transparent px-4 py-3 transition-colors duration-200 ease-in-out">
                    ğŸ“š ë‹¨ì–´ì¥
                </button>
                <button onclick="changeTab('phrases')" class="tab-btn text-lg font-semibold border-b-2 border-transparent px-4 py-3 transition-colors duration-200 ease-in-out">
                    ğŸ’¬ í‘œí˜„ê³¼ ê·œì¹™
                </button>
                <button onclick="changeTab('hiragana')" class="tab-btn text-lg font-semibold border-b-2 border-transparent px-4 py-3 transition-colors duration-200 ease-in-out">
                    ğŸ“ íˆë¼ê°€ë‚˜ í‘œ
                </button>
                <button onclick="changeTab('map')" class="tab-btn text-lg font-semibold border-b-2 border-transparent px-4 py-3 transition-colors duration-200 ease-in-out">
                    ğŸ—ºï¸ ì¼ë³¸ ë¬¸í™” ì§€ë„
                </button>
                <button onclick="changeTab('numbers')" class="tab-btn text-lg font-semibold border-b-2 border-transparent px-4 py-3 transition-colors duration-200 ease-in-out">
                    ğŸ”¢ ìˆ«ì
                </button>
                <button onclick="changeTab('test')" class="tab-btn text-lg font-semibold border-b-2 border-transparent px-4 py-3 transition-colors duration-200 ease-in-out">
                    âœ… í•™ìŠµ í…ŒìŠ¤íŠ¸
                </button>
            </nav>
        </div>

        <!-- Tab Content -->
        <main>
            <!-- Vocabulary Section -->
            <div id="vocab" class="tab-content active">
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Words will be dynamically inserted here -->
                </div>
            </div>

            <!-- Phrases & Culture Section -->
            <div id="phrases" class="tab-content">
                 <div class="space-y-8">
                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">ğŸ‘‹ ì¸ì‚¬ë§</h3>
                        <div id="phrases-greetings" class="space-y-4">
                            <!-- Phrases will be dynamically inserted here -->
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">ğŸ—£ï¸ í˜¸ì¹­ê³¼ 1ì¸ì¹­ ëŒ€ëª…ì‚¬</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white p-5 rounded-lg shadow-md">
                                <h4 class="text-xl font-semibold mb-3 text-blue-500">ë‚˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë§</h4>
                                <ul class="space-y-3 text-gray-700">
                                    <li><strong>ã‚ãŸã— (ç§):</strong> ê°€ì¥ ì¼ë°˜ì ì´ê³  ê³µì†í•œ í‘œí˜„ (ë‚¨ë…€ê³µìš©)</li>
                                    <li><strong>ã‚ãŸãã— (ç§):</strong> 'ã‚ãŸã—'ë³´ë‹¤ ë” ê²©ì‹ìˆê³  ê²¸ì†í•œ í‘œí˜„</li>
                                    <li><strong>ã¼ã (åƒ•):</strong> ì£¼ë¡œ ë‚¨ì„±ì´ ì‚¬ìš©í•˜ëŠ” ë¶€ë“œëŸ¬ìš´ í‘œí˜„</li>
                                    <li><strong>ãŠã‚Œ (ä¿º):</strong> ë§¤ìš° ì¹œí•œ ì‚¬ì´ì—ì„œ ë‚¨ì„±ì´ ì‚¬ìš©í•˜ëŠ” í‘œí˜„</li>
                                </ul>
                            </div>
                            <div class="bg-white p-5 rounded-lg shadow-md">
                                <h4 class="text-xl font-semibold mb-3 text-blue-500">ìƒëŒ€ë°©ì„ ë¶€ë¥´ëŠ” ë§</h4>
                                <ul class="space-y-3 text-gray-700">
                                    <li><strong>ã•ã¾ (æ§˜):</strong> ê°€ì¥ ë†’ì„ í‘œí˜„ (ê³ ê°, ì‹  ë“±)</li>
                                    <li><strong>ã•ã‚“:</strong> ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì“°ì´ëŠ” ì¡´ì¹­ (Mr./Ms.)</li>
                                    <li><strong>ãã‚“ (å›):</strong> ì£¼ë¡œ ë‚¨ì í›„ë°°ë‚˜ ë™ë…„ë°°ì—ê²Œ ì‚¬ìš©</li>
                                    <li><strong>ã¡ã‚ƒã‚“:</strong> ì£¼ë¡œ ì—¬ì ì•„ì´ë‚˜ ì¹œí•œ ì¹œêµ¬ì—ê²Œ ì‚¬ìš©</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pronunciation Rules Section from Notes -->
                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">âœï¸ ì¼ë³¸ì–´ ë°œìŒ ê·œì¹™</h3>
                        <div class="space-y-6">
                            <div class="bg-white p-5 rounded-lg shadow-md space-y-4">
                                <h4 class="text-xl font-semibold text-blue-500">ì´‰ìŒ(ä¿ƒéŸ³), ì¥ìŒ(é•·éŸ³), ë°œìŒ(æ’¥éŸ³)</h4>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>ì´‰ìŒ(ä¿ƒéŸ³):</strong> ì‘ì€ 'ã¤' (ã£)ëŠ” ë’¤ì— ì˜¤ëŠ” ììŒì„ í•œ ë²ˆ ë” ë°œìŒí•˜ëŠ” ë°›ì¹¨ì²˜ëŸ¼ ì“°ì—¬ìš”. ì˜ˆ: ãã£ã¦ (í‚·í…Œ), ã’ã£ã›ã (ê²Ÿì„¸í‚¤)</li>
                                    <li><strong>ì¥ìŒ(é•·éŸ³):</strong> ëª¨ìŒì„ ê¸¸ê²Œ ë°œìŒí•˜ëŠ” ê·œì¹™ì´ì—ìš”. ì˜ˆë¥¼ ë“¤ì–´ 'ãŠã‹ã‚ã•ã‚“'(ì˜¤ì¹´-ìƒ)ì²˜ëŸ¼ 'ì•„' ë‹¨ ë’¤ì˜ 'ã‚'ëŠ” ì•ì˜ 'ì•„'ë¥¼ ê¸¸ê²Œ ë°œìŒí•´ì¤˜ìš”.</li>
                                    <li><strong>ë°œìŒ(æ’¥éŸ³):</strong> 'ã‚“'ì€ ë’¤ì— ì˜¤ëŠ” ì†Œë¦¬ì— ë”°ë¼ 'ã„´', 'ã…', 'ã…‡' ë°›ì¹¨ ì†Œë¦¬ë¥¼ ë‚´ìš”. ì˜ˆ: ã•ã‚“ã½ (ì‚°ë½€), ã§ã‚“ã‚ (ë…ì™€)</li>
                                </ul>
                            </div>
                             <div class="bg-white p-5 rounded-lg shadow-md space-y-4">
                                <h4 class="text-xl font-semibold text-blue-500">ì—°íƒ í˜„ìƒ(é€£æ¿)</h4>
                                <p>ë‘ ê°œì˜ ë‹¨ì–´ê°€ í•©ì³ì ¸ í•˜ë‚˜ì˜ ë‹¨ì–´ê°€ ë  ë•Œ, ë’¤ì— ì˜¤ëŠ” ë‹¨ì–´ì˜ ì²«ì†Œë¦¬ê°€ íƒìŒìœ¼ë¡œ ë°”ë€ŒëŠ” í˜„ìƒì´ì—ìš”. ëª¨ë“  ë‹¨ì–´ì— ì ìš©ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì•Œì•„ë‘ë©´ ìœ ìš©í•´ìš”.</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li>ì˜ˆì‹œ: ã‹ã„ã¦ã‚“(íšŒì „) + ã™ã—(ì´ˆë°¥) â†’ ã‹ã„ã¦ã‚“<strong class="text-red-500">ãš</strong>ã— (ì¹´ì´í…ì¦ˆì‹œ)</li>
                                    <li>ì˜ˆì‹œ: ã¦(ì†) + ã‹ã¿(ì¢…ì´) â†’ ã¦<strong class="text-red-500">ãŒ</strong>ã¿ (í…Œê°€ë¯¸)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">ğŸ’¡ ì•Œì•„ë‘ë©´ ì¢‹ì€ ì¼ë³¸ì–´ ì§€ì‹</h3>
                        <div class="bg-white p-5 rounded-lg shadow-md space-y-4 text-gray-700">
                             <div>
                                <h4 class="text-xl font-semibold mb-2 text-blue-500">ì¡°ì‚¬ 'ã¯'ì™€ 'ã¸'ì˜ ë°œìŒ</h4>
                                <p>ì¡°ì‚¬ë¡œ ì“°ì¼ ë•Œ ì¼ë¶€ íˆë¼ê°€ë‚˜ëŠ” ë°œìŒì´ ë‹¬ë¼ì ¸ìš”.</p>
                                <ul class="list-disc list-inside space-y-2">
                                    <li>ì¡°ì‚¬ 'ã¯'ëŠ” 'ì™€(wa)'ë¡œ ë°œìŒë¼ìš”. ì˜ˆ: ã‚ãŸã—ã¯ (ì™€íƒ€ì‹œì™€)</li>
                                    <li>ì¡°ì‚¬ 'ã¸'ëŠ” 'ì—(e)'ë¡œ ë°œìŒë¼ìš”. ì˜ˆ: ãŒã£ã“ã†ã¸ (ê°ì½”ãƒ¼ì—)</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-xl font-semibold mb-2 text-blue-500">ì¸ì‚¬ë§ì˜ ìœ ë˜</h4>
                                <p>'ã“ã‚“ã«ã¡ã¯'ë‚˜ 'ã“ã‚“ã°ã‚“ã¯' ê°™ì€ ì¸ì‚¬ë§ì€ ì›ë˜ 'ä»Šæ—¥ã¯ã”æ©Ÿå«Œã„ã‹ãŒã§ã™ã‹' (ì˜¤ëŠ˜ ê¸°ë¶„ì€ ì–´ë– ì‹ ê°€ìš”?)ì™€ ê°™ì€ ë¬¸ì¥ì˜ ë’·ë¶€ë¶„ì´ ìƒëµë˜ë©´ì„œ êµ³ì–´ì§„ í‘œí˜„ì´ì—ìš”. ê·¸ë˜ì„œ ë¬¸ì¥ ì¤‘ê°„ì— ì“°ì´ë˜ ì¡°ì‚¬ 'ã¯'ê°€ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆë‹µë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Materials from Uploaded Notes -->
                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">ğŸ“ ì¶”ê°€ í•™ìŠµ ìë£Œ (ê¸°ë³¸ ë¬¸ì¥ê³¼ ì§ì—…)</h3>
                        <div class="space-y-6">
                            <div class="bg-white p-5 rounded-lg shadow-md space-y-4">
                                <h4 class="text-xl font-semibold text-blue-500">ì¶”ê°€ ë‹¨ì–´</h4>
                                <ul class="list-disc list-inside space-y-2">
                                    <li><strong>å…ˆç”Ÿ (ã›ã‚“ã›ã„, sensei):</strong> ì„ ìƒë‹˜</li>
                                    <li><strong>å­¦ç”Ÿ (ãŒãã›ã„, gakusei):</strong> í•™ìƒ</li>
                                    <li><strong>åŒ»ç”Ÿ (ã„ã—ã‚ƒ, isha):</strong> ì˜ì‚¬</li>
                                </ul>
                            </div>
                            <div class="bg-white p-5 rounded-lg shadow-md space-y-4">
                                <h4 class="text-xl font-semibold text-blue-500">ê¸°ë³¸ ë¬¸ì¥ ì˜ˆì‹œ</h4>
                                <ul class="space-y-3 text-gray-700">
                                    <li><strong>ã„ã•ã‚“ã¯ å­¦ç”Ÿã§ã™ã€‚</strong> (ì´ã•ã‚“ã¯ í•™ìƒì…ë‹ˆë‹¤.) - I-san is a student.</li>
                                    <li><strong>ã„ã•ã‚“ã¯ å­¦ç”Ÿã§ã™ã‹ã€‚</strong> (ì´ã•ã‚“ã¯ í•™ìƒì…ë‹ˆê¹Œ?) - Is I-san a student?</li>
                                    <li><strong>ã¯ã„ã€ ã„ã•ã‚“ã¯ å­¦ç”Ÿã§ã™ã€‚</strong> (ë„¤, ì´ã•ã‚“ã¯ í•™ìƒì…ë‹ˆë‹¤.)</li>
                                    <li><strong>ãƒ‘ã‚¯ã•ã‚“ã¯ åŒ»ç”Ÿã§ã™ã€‚</strong> (ë°•ã•ã‚“ã¯ ì˜ì‚¬ì…ë‹ˆë‹¤.) - Park-san is a doctor.</li>
                                    <li><strong>ãƒ‘ã‚¯ã•ã‚“ã¯ åŒ»ç”Ÿã§ã™ã‹ã€‚</strong> (ë°•ã•ã‚“ã¯ ì˜ì‚¬ì…ë‹ˆê¹Œ?) - Is Park-san a doctor?</li>
                                    <li><strong>ã¯ã„ã€ ãƒ‘ã‚¯ã•ã‚“ã¯ åŒ»ç”Ÿã§ã™ã€‚</strong> (ë„¤, ë°•ã•ã‚“ã¯ ì˜ì‚¬ì…ë‹ˆë‹¤.)</li>
                                    <li><strong>ã„ã•ã‚“ã¯ å…ˆç”Ÿã§ã™ã€‚</strong> (ì´ã•ã‚“ã¯ ì„ ìƒë‹˜ì…ë‹ˆë‹¤.) - I-san is a teacher.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hiragana Chart Section -->
            <div id="hiragana" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">äº”åéŸ³å›³ (ã”ã˜ã‚…ã†ãŠã‚“ãš) - ì˜¤ì‹­ìŒë„</h3>
                    <div id="hiragana-grid" class="hiragana-grid-container">
                        <!-- Hiragana characters will be dynamically inserted here -->
                    </div>
                    
                    <h3 class="text-2xl font-bold text-blue-600 mt-10 mb-4 border-b pb-2">íƒìŒ(æ¿éŸ³)ê³¼ ë°˜íƒìŒ(åŠæ¿éŸ³)</h3>
                    <div id="dakuon-grid" class="space-y-4">
                         <!-- Dakuon/Handakuon charts will be dynamically inserted here -->
                    </div>

                    <h3 class="text-2xl font-bold text-blue-600 mt-10 mb-4 border-b pb-2">æ‹—éŸ³ (ã‚ˆã†ãŠã‚“) - ìš”ìŒ</h3>
                    <div id="yoon-grid" class="space-y-4">
                        <!-- Yoon charts will be dynamically inserted here -->
                    </div>
                </div>
            </div>

            <!-- Map & Culture Section -->
            <div id="map" class="tab-content">
                 <div class="bg-white p-6 rounded-lg shadow-md space-y-8">
                    <div>
                        <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">ğŸ—¾ ì¼ë³¸ ê¸°ë³¸ ì •ë³´</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-lg">
                            <p><strong>êµ­í† :</strong> í™‹ì¹´ì´ë„(åŒ—æµ·é“), í˜¼ìŠˆ(æœ¬å·), ì‹œì½”ì¿ (å››å›½), ê·œìŠˆ(ä¹å·) 4ê°œì˜ í° ì„¬ê³¼ ì•½ 6,800ì—¬ ê°œì˜ ì‘ì€ ì„¬ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆì–´ìš”. (í•œë°˜ë„ì˜ ì•½ 1.7ë°°)</p>
                            <p><strong>ì¸êµ¬:</strong> ì•½ 1ì–µ 2,500ë§Œ ëª… ì´ìƒìœ¼ë¡œ, ì„¸ê³„ 12ìœ„ì˜ ì¸êµ¬ ëŒ€êµ­ì´ì—ìš”.</p>
                            <p><strong>í–‰ì •êµ¬ì—­:</strong> 1ë„(éƒ½), 1ë„(é“), 2ë¶€(åºœ), 43í˜„(çœŒ)ìœ¼ë¡œ êµ¬ì„±ë¼ìš”. (ì´ 47ê°œ ë„ë„ë¶€í˜„)</p>
                             <p><strong>ê¸°í›„:</strong> ë‚¨ë¶ìœ¼ë¡œ ê¸¸ê²Œ ë»—ì–´ ìˆì–´ ì§€ì—­ë³„ë¡œ ì°¨ì´ê°€ ìˆì§€ë§Œ, ëŒ€ë¶€ë¶„ ì‚¬ê³„ì ˆì´ ëšœë ·í•œ ì˜¨ëŒ€ ê¸°í›„ì— ì†í•´ìš”.</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <h4 class="text-xl font-semibold mb-3 text-blue-500">ğŸ“ ì£¼ìš” ì§€ì—­ ë° ëª…ì†Œ</h4>
                            <ul class="space-y-2 text-gray-700" id="map-locations">
                                <!-- Locations will be dynamically inserted -->
                            </ul>
                        </div>
                        <div class="space-y-6">
                            <div>
                                <h4 class="text-xl font-semibold mb-3 text-blue-500">ğŸ’´ ì¼ë³¸ì˜ í™”íì™€ ì†Œë¹„ì„¸</h4>
                                <p>í†µí™” ë‹¨ìœ„ëŠ” <strong>ì—”(å††)</strong>ì…ë‹ˆë‹¤. ë™ì „ì€ 1, 5, 10, 50, 100, 500ì—”, ì§€íëŠ” 1000, 2000, 5000, 10000ì—”ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
                                <p class="mt-2">ë¬¼ê±´ì„ ì‚´ ë•ŒëŠ” ê°€ê²©ì— <strong>ì†Œë¹„ì„¸(æ¶ˆè²»ç¨) 10%</strong>ê°€ ì¶”ê°€ë¼ìš”.</p>
                            </div>
                            <div>
                                <h4 class="text-xl font-semibold mb-3 text-blue-500">âœï¸ ì¼ë³¸ì˜ ë¬¸ì</h4>
                                <p>ì¼ë³¸ì–´ëŠ” <strong>íˆë¼ê°€ë‚˜, ê°€íƒ€ì¹´ë‚˜, í•œì</strong> ì„¸ ì¢…ë¥˜ì˜ ë¬¸ìë¥¼ í•¨ê»˜ ì‚¬ìš©í•©ë‹ˆë‹¤. ê°ê°ì˜ ëª¨ì–‘ê³¼ ì“°ì„ìƒˆê°€ ë‹¤ë¦…ë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Numbers Section -->
            <div id="numbers" class="tab-content">
                <div class="bg-white p-6 rounded-lg shadow-md space-y-8">
                    <h3 class="text-2xl font-bold text-blue-600 mb-4 border-b pb-2">ğŸ”¢ ì¼ë³¸ì–´ ìˆ«ì (1~100 ì˜ˆì‹œ)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <h4 class="text-xl font-semibold text-blue-500">ê¸°ë³¸ ìˆ«ì (1~10)</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li><strong>1: ã„ã¡ (ì´ì°Œ)</strong></li>
                                <li><strong>2: ã« (ë‹ˆ)</strong></li>
                                <li><strong>3: ã•ã‚“ (ìƒ)</strong></li>
                                <li><strong>4: ã— / ã‚ˆã‚“ (ì‹œ / ìš©)</strong></li>
                                <li><strong>5: ã” (ê³ )</strong></li>
                                <li><strong>6: ã‚ã (ë¡œê¾¸)</strong></li>
                                <li><strong>7: ã—ã¡ / ãªãª (ì‹œì°Œ / ë‚˜ë‚˜)</strong></li>
                                <li><strong>8: ã¯ã¡ (í•˜ì°Œ)</strong></li>
                                <li><strong>9: ã / ãã‚…ã† (ì¿  / í-)</strong></li>
                                <li><strong>10: ã˜ã‚…ã† (ì¥¬-)</strong></li>
                            </ul>
                        </div>
                        <div class="space-y-4">
                            <h4 class="text-xl font-semibold text-blue-500">10ì˜ ë°°ìˆ˜ ì˜ˆì‹œ</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li><strong>20: ã«ã˜ã‚…ã† (ë‹ˆì¥¬-)</strong></li>
                                <li><strong>30: ã•ã‚“ã˜ã‚…ã† (ì‚°ì¥¬-)</strong></li>
                                <li><strong>40: ã‚ˆã‚“ã˜ã‚…ã† (ìš˜ì¥¬-)</strong></li>
                                <li><strong>50: ã”ã˜ã‚…ã† (ê³ ì¥¬-)</strong></li>
                                <li><strong>60: ã‚ãã˜ã‚…ã† (ë¡œê¾¸ì¥¬-)</strong></li>
                                <li><strong>70: ãªãªã˜ã‚…ã† (ë‚˜ë‚˜ì¥¬-)</strong></li>
                                <li><strong>80: ã¯ã¡ã˜ã‚…ã† (í•˜ì°Œì¥¬-)</strong></li>
                                <li><strong>90: ãã‚…ã†ã˜ã‚…ã† (í-ì¥¬-)</strong></li>
                                <li><strong>100: ã²ã‚ƒã (í–ê¾¸)</strong></li>
                            </ul>
                        </div>
                    </div>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <h4 class="text-xl font-semibold mb-3 text-blue-500">ìˆ«ì ë³€í™˜ê¸° (1~999)</h4>
                        <input type="number" id="number-input" min="1" max="999" placeholder="ìˆ«ì ì…ë ¥ (1~999)" class="w-full p-2 border rounded mb-2">
                        <button onclick="convertNumber()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">ë³€í™˜</button>
                        <p id="number-result" class="mt-4 text-lg font-semibold"></p>
                    </div>
                </div>
            </div>

            <!-- Test Section -->
            <div id="test" class="tab-content">
                <div id="test-selection" class="text-center">
                    <h3 class="text-2xl font-bold text-blue-600 mb-6">í•™ìŠµí•œ ë‚´ìš©ì„ í…ŒìŠ¤íŠ¸í•´ ë³´ì„¸ìš”!</h3>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                        <button onclick="startTest('hiragana')" class="w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg transition-transform transform hover:scale-105 shadow-lg">
                            íˆë¼ê°€ë‚˜ í…ŒìŠ¤íŠ¸
                        </button>
                        <button onclick="startTest('vocab')" class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-lg transition-transform transform hover:scale-105 shadow-lg">
                            ë‹¨ì–´ í…ŒìŠ¤íŠ¸
                        </button>
                        <button onclick="startTest('content')" class="w-full sm:w-auto bg-purple-500 hover:bg-purple-600 text-white font-bold py-4 px-8 rounded-lg transition-transform transform hover:scale-105 shadow-lg">
                            í•™ìŠµ ë‚´ìš© í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                </div>

                <div id="quiz-container" class="hidden w-full max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md">
                    <div id="quiz-header" class="flex justify-between items-center mb-4">
                        <h3 id="quiz-title" class="text-xl font-bold text-blue-600"></h3>
                        <p id="quiz-progress" class="text-gray-600 font-semibold"></p>
                    </div>
                    <div id="quiz-question" class="text-center text-4xl font-bold my-8 min-h-[60px]"></div>
                    <div id="quiz-options" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
                    <div id="quiz-feedback" class="mt-4 text-center font-bold"></div>
                    <div class="mt-6 text-center">
                        <button id="next-question-btn" class="hidden bg-gray-700 hover:bg-gray-800 text-white font-bold py-2 px-6 rounded-lg">ë‹¤ìŒ ë¬¸ì œ</button>
                    </div>
                </div>

                <div id="result-container" class="hidden text-center w-full max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md">
                    <h3 class="text-3xl font-bold text-blue-600 mb-4">í…ŒìŠ¤íŠ¸ ê²°ê³¼</h3>
                    <p id="result-score" class="text-5xl font-bold my-6"></p>
                    <p id="result-message" class="text-lg text-gray-700"></p>
                    <div class="mt-8 flex justify-center gap-4">
                        <button id="retry-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg">ë‹¤ì‹œ í’€ê¸°</button>
                        <button onclick="showTestSelection()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg">ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Data from original file and user's notes
        const vocabulary = [
             // Original
            { jp: 'ã‚ã‹ã„', romaji: 'akai', kr: 'ë¹¨ê°›ë‹¤' }, { jp: 'ã„ãˆ', romaji: 'ie', kr: 'ì§‘' },
            { jp: 'ãˆã', romaji: 'eki', kr: 'ì—­' }, { jp: 'ã‹ãŠ', romaji: 'kao', kr: 'ì–¼êµ´' },
            { jp: 'ã„ã™', romaji: 'isu', kr: 'ì˜ì' }, { jp: 'ã™ã—', romaji: 'sushi', kr: 'ì´ˆë°¥' },
            { jp: 'ã—ã¡', romaji: 'shichi', kr: 'ì¼ê³±' }, { jp: 'ã¤ããˆ', romaji: 'tsukue', kr: 'ì±…ìƒ' },
            { jp: 'ã¡ã‹ã¦ã¤', romaji: 'chikatetsu', kr: 'ì§€í•˜ì² ' }, { jp: 'ã„ã¬', romaji: 'inu', kr: 'ê°œ' },
            { jp: 'ã­ã“', romaji: 'neko', kr: 'ê³ ì–‘ì´' }, { jp: 'ã¯ã¡', romaji: 'hachi', kr: 'ì—¬ëŸ' },
            { jp: 'ã²ã¨', romaji: 'hito', kr: 'ì‚¬ëŒ' }, { jp: 'ã¿ã›', romaji: 'mise', kr: 'ê°€ê²Œ' },
            { jp: 'ãªã¾ãˆ', romaji: 'namae', kr: 'ì´ë¦„' }, { jp: 'ã‚„ã•ã„', romaji: 'yasai', kr: 'ì±„ì†Œ' },
            { jp: 'ãµã‚†', romaji: 'fuyu', kr: 'ê²¨ìš¸' }, { jp: 'ãµã‚', romaji: 'furo', kr: 'ëª©ìš•' },
            { jp: 'ã‚ã', romaji: 'roku', kr: 'ì—¬ì„¯' }, { jp: 'ãã™ã‚Š', romaji: 'kusuri', kr: 'ì•½' },
            { jp: 'ã«ã‚', romaji: 'niwa', kr: 'ì •ì›' }, { jp: 'ã‚ãŸã—', romaji: 'watashi', kr: 'ë‚˜, ì €' },
            { jp: 'ã—ã‚ã„', romaji: 'shiroi', kr: 'í•˜ì–—ë‹¤' }, { jp: 'ã‹ãã', romaji: 'kazoku', kr: 'ê°€ì¡±' },
            { jp: 'ã›ã‚“ã›ã„', romaji: 'sensei', kr: 'ì„ ìƒë‹˜' }, { jp: 'ã™ã†ãŒã', romaji: 'suugaku', kr: 'ìˆ˜í•™' },
            { jp: 'ãŒã£ã“ã†', romaji: 'gakkou', kr: 'í•™êµ' }, { jp: 'ãŠã‚“ãŒã', romaji: 'ongaku', kr: 'ìŒì•…' },
            { jp: 'ã‹ã°ã‚“', romaji: 'kaban', kr: 'ê°€ë°©' }, { jp: 'ã•ã‚“ã½', romaji: 'sanpo', kr: 'ì‚°ì±…' },
            { jp: 'ã‚Šã‚‡ã†ã‚Š', romaji: 'ryouri', kr: 'ìš”ë¦¬' }, { jp: 'ã“ã“', romaji: 'koko', kr: 'ì—¬ê¸°' },
            { jp: 'ã»ã‚“', romaji: 'hon', kr: 'ì±…' }, { jp: 'ã‚ˆã‚“', romaji: 'yon', kr: 'ì‚¬' },
            { jp: 'ã¶ã‹ã¤', romaji: 'bukatsu', kr: 'ë™ì•„ë¦¬í™œë™' }, { jp: 'ã”ã”', romaji: 'gogo', kr: 'ì˜¤í›„' },
            { jp: 'ã‚ã—', romaji: 'ashi', kr: 'ë‹¤ë¦¬' }, { jp: 'ã‚ã˜', romaji: 'aji', kr: 'ë§›' },
            { jp: 'ã„ã—ã‚ƒ', romaji: 'isha', kr: 'ì˜ì‚¬' }, { jp: 'ãã‚…ã†', romaji: 'kyuu', kr: '9' },
            { jp: 'ã˜ã‚†ã†', romaji: 'jiyÅ«', kr: 'ììœ ' }, { jp: 'ã˜ã‚…ã†', romaji: 'juu', kr: '10' },
            { jp: 'ã‚Šã‚…ã†', romaji: 'ryuu', kr: 'ìš©' }, { jp: 'ã‚ãŸã—ãŸã¡', romaji: 'watashitachi', kr: 'ìš°ë¦¬ë“¤' },
            { jp: 'ã‘ã•', romaji: 'kesa', kr: 'ì˜¤ëŠ˜ ì•„ì¹¨' }, { jp: 'ã„ã£ã±ã„', romaji: 'ippai', kr: 'ê°€ë“' },
            { jp: 'ãã£ã¦', romaji: 'kitte', kr: 'ìš°í‘œ' }, { jp: 'ã›ã‚“ã±ã„', romaji: 'senpai', kr: 'ì„ ë°°' },
            { jp: 'ã»ã£ã‹ã„ã©ã†', romaji: 'hokkaido', kr: 'í™‹ì¹´ì´ë„' }, { jp: 'ãŠã‹ã‚ã•ã‚“', romaji: 'okaasan', kr: 'ì–´ë¨¸ë‹ˆ' },
            { jp: 'ãŠã«ã„ã•ã‚“', romaji: 'oniisan', kr: 'í˜•, ì˜¤ë¹ ' }, { jp: 'ãŠã­ãˆã•ã‚“', romaji: 'oneesan', kr: 'ëˆ„ë‚˜, ì–¸ë‹ˆ' },
            { jp: 'ãŠãŠã•ã‹', romaji: 'oosaka', kr: 'ì˜¤ì‚¬ì¹´' }, { jp: 'ã“ã†ã“ã†', romaji: 'koukou', kr: 'ê³ ë“±í•™êµ' },
            { jp: 'ãŠã°ã•ã‚“', romaji: 'obasan', kr: 'ì•„ì£¼ë¨¸ë‹ˆ' }, { jp: 'ãŠã°ã‚ã•ã‚“', romaji: 'obaasan', kr: 'í• ë¨¸ë‹ˆ' },
            { jp: 'ã¦ã‚“ã', romaji: 'tenki', kr: 'ë‚ ì”¨' }, { jp: 'ãã†ã', romaji: 'kuuki', kr: 'ê³µê¸°' },
            { jp: 'ã³ã‚ˆã†ã„ã‚“', romaji: 'biyouin', kr: 'ë¯¸ìš©ì‹¤' }, { jp: 'ã³ã‚‡ã†ã„ã‚“', romaji: 'byouin', kr: 'ë³‘ì›' },
            { jp: 'ãŠã£ã¨', romaji: 'otto', kr: 'ë‚¨í¸' }, { jp: 'ã¤ã¾', romaji: 'tsuma', kr: 'ì•„ë‚´' },
            { jp: 'ãŠã¨', romaji: 'oto', kr: 'ì†Œë¦¬' }, { jp: 'ã“ãˆ', romaji: 'koe', kr: 'ëª©ì†Œë¦¬' },
            { jp: 'ã–ã£ã—', romaji: 'zasshi', kr: 'ì¡ì§€' }, { jp: 'ãã£ã·', romaji: 'kippu', kr: 'í‘œ' },
            { jp: 'ã†ã‚“ã‚ã„', romaji: 'unmei', kr: 'ìš´ëª…' }, { jp: 'ã‚ã‚“ãªã„', romaji: 'annai', kr: 'ì•ˆë‚´' },
            { jp: 'ã‚Šã‚“ã”', romaji: 'ringo', kr: 'ì‚¬ê³¼' }, { jp: 'ã§ã‚“ã‚', romaji: 'denwa', kr: 'ì „í™”' },
            // From notes batch 1
            { jp: 'ãã‚“', romaji: 'kin', kr: 'ê¸ˆ' }, { jp: 'ãã‚“', romaji: 'gin', kr: 'ì€' },
            { jp: 'ã˜ã‚“ã“ã†', romaji: 'jinkou', kr: 'ì¸êµ¬' }, { jp: 'ã‹ã‚“ã˜', romaji: 'kanji', kr: 'í•œì' },
            { jp: 'ã‹ã˜', romaji: 'kaji', kr: 'í™”ì¬' }, { jp: 'ã‹ã‚“ã°ã‚“', romaji: 'kanban', kr: 'ê°„íŒ' },
            { jp: 'ã«ã»ã‚“', romaji: 'nihon', kr: 'ì¼ë³¸' }, { jp: 'ã¦', romaji: 'te', kr: 'ì†' },
            { jp: 'ã¦ã‚“', romaji: 'ten', kr: 'ì ' },
            // From notes batch 2
            { jp: 'ã‚€ã—', romaji: 'mushi', kr: 'ë²Œë ˆ' }, { jp: 'ãã¡', romaji: 'kuchi', kr: 'ì…' },
            { jp: 'ã†ã', romaji: 'uso', kr: 'ê±°ì§“ë§' }, { jp: 'ã‚ã•', romaji: 'asa', kr: 'ì•„ì¹¨' },
            { jp: 'ã»ã—', romaji: 'hoshi', kr: 'ë³„' }, { jp: 'ã’ã‚“ã‹ã‚“', romaji: 'genkan', kr: 'í˜„ê´€' },
            { jp: 'ã‹ã', romaji: 'kagi', kr: 'ì—´ì‡ ' }, { jp: 'ãã‚“ã“ã†', romaji: 'ginkou', kr: 'ì€í–‰' },
            { jp: 'ã˜ã—ã‚‡', romaji: 'jisho', kr: 'ì‚¬ì „' }, { jp: 'ã—ã‚“ã¶ã‚“', romaji: 'shinbun', kr: 'ì‹ ë¬¸' },
            { jp: 'ã¡ãš', romaji: 'chizu', kr: 'ì§€ë„' }, { jp: 'ã ã„ãŒã', romaji: 'daigaku', kr: 'ëŒ€í•™êµ' },
            { jp: 'ãˆã‚“ã´ã¤', romaji: 'enpitsu', kr: 'ì—°í•„' }, { jp: 'ã¨ã‘ã„', romaji: 'tokei', kr: 'ì‹œê³„' },
            { jp: 'ã’ã£ã›ã', romaji: 'gesseki', kr: 'ê²°ì„' }, { jp: 'ã¦ãŒã¿', romaji: 'tegami', kr: 'í¸ì§€' }
        ];

        const phrases = [
            { jp: 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™', romaji: 'ohayou gozaimasu', kr: 'ì•ˆë…•í•˜ì„¸ìš” (ì•„ì¹¨ ì¸ì‚¬)' },
            { jp: 'ã“ã‚“ã«ã¡ã¯', romaji: 'konnichiwa', kr: 'ì•ˆë…•í•˜ì„¸ìš” (ì ì‹¬ ì¸ì‚¬)' },
            { jp: 'ã“ã‚“ã°ã‚“ã¯', romaji: 'konbanwa', kr: 'ì•ˆë…•í•˜ì„¸ìš” (ì €ë… ì¸ì‚¬)' },
            { jp: 'ã•ã‚ˆã†ãªã‚‰', romaji: 'sayounara', kr: 'ì•ˆë…•íˆ ê°€ì„¸ìš”/ê³„ì„¸ìš”' },
            { jp: 'ã˜ã‚ƒã€ã¾ãŸã­', romaji: 'ja, matane', kr: 'ê·¸ëŸ¼, ë˜ ë´ (ì¹œí•œ ì‚¬ì´)' },
            { jp: 'ã¾ãŸ ã‚ã—ãŸ', romaji: 'mata ashita', kr: 'ë‚´ì¼ ë´ìš”' },
            { jp: 'ãƒã‚¤ãƒã‚¤', romaji: 'baibai', kr: 'ë°”ì´ë°”ì´' },
            { jp: 'ãã‚‡ã†ã¯ ã„ã„ ã¦ã‚“ãã§ã™ã­', romaji: 'kyou wa ii tenki desu ne', kr: 'ì˜¤ëŠ˜ì€ ë‚ ì”¨ê°€ ì¢‹ë„¤ìš”' },
        ];
        
        const mapLocations = [
            { name: 'í™‹ì¹´ì´ë„ (åŒ—æµ·é“)', feature: 'ì‚¿í¬ë¡œ(æœ­å¹Œ) ëˆˆ ì¶•ì œ(é›ªã¾ã¤ã‚Š)ê°€ ìœ ëª…í•´ìš”.' },
            { name: 'í˜¼ìŠˆ (æœ¬å·) - ë„ì¿„ (æ±äº¬)', feature: 'ì¼ë³¸ì˜ ìˆ˜ë„ì´ë©°, ë„ì¿„ íƒ€ì›Œ(æ±äº¬ã‚¿ãƒ¯ãƒ¼)ê°€ ìƒì§•ì ì´ì—ìš”.' },
            { name: 'í˜¼ìŠˆ (æœ¬å·) - êµí†  (äº¬éƒ½) & ë‚˜ë¼ (å¥ˆè‰¯)', feature: 'ì „í†µì ì¸ ë„ì‹œë¡œ, ê¸ˆê°ì‚¬(é‡‘é–£å¯º)ì™€ ì‚¬ìŠ´ ê³µì›ì´ ìœ ëª…í•´ìš”.' },
            { name: 'í˜¼ìŠˆ (æœ¬å·) - ì˜¤ì‚¬ì¹´ (å¤§é˜ª) & íˆë©”ì§€ (å§«è·¯)', feature: 'ì˜¤ì‚¬ì¹´ ì„±(å¤§é˜ªåŸ)ê³¼ ì•„ë¦„ë‹¤ìš´ íˆë©”ì§€ ì„±(å§«è·¯åŸ)ì´ ìˆì–´ìš”.' },
            { name: 'ì‹œì½”ì¿  (å››å›½)', feature: 'ë§ˆì¸ ì•¼ë§ˆ(æ¾å±±)ì˜ ë„ê³  ì˜¨ì²œ(é“å¾Œæ¸©æ³‰)ì´ ìœ ëª…í•´ìš”.' },
            { name: 'ê·œìŠˆ (ä¹å·)', feature: 'í›„ì¿ ì˜¤ì¹´(ç¦å²¡), ë‚˜ê°€ì‚¬í‚¤(é•·å´) ë“± í•­êµ¬ ë„ì‹œì™€ ì˜¨ì²œì´ ë§ì•„ìš”.' },
            { name: 'ì˜¤í‚¤ë‚˜ì™€ (æ²–ç¸„)', feature: 'ì•„ë¦„ë‹¤ìš´ ë°”ë‹¤ì™€ ë…íŠ¹í•œ ë¥˜í(ç‰çƒ) ë¬¸í™”, ìŠˆë¦¬ ì„±(é¦–é‡ŒåŸ)ì´ ìˆì–´ìš”.' },
            { name: 'í›„ì§€ì‚° (å¯Œå£«å±±)', feature: 'ì¼ë³¸ì—ì„œ ê°€ì¥ ë†’ê³  ìœ ëª…í•œ ì‚°ì´ì—ìš”.' }
        ];

        const hiraganaChart = [
            // a, i, u, e, o
            { jp: 'ã‚', romaji: 'a', kr: 'ì•„' }, { jp: 'ã„', romaji: 'i', kr: 'ì´' }, { jp: 'ã†', romaji: 'u', kr: 'ìš°' }, { jp: 'ãˆ', romaji: 'e', kr: 'ì—' }, { jp: 'ãŠ', romaji: 'o', kr: 'ì˜¤' },
            // ka, ki, ku, ke, ko
            { jp: 'ã‹', romaji: 'ka', kr: 'ì¹´' }, { jp: 'ã', romaji: 'ki', kr: 'í‚¤' }, { jp: 'ã', romaji: 'ku', kr: 'ì¿ ' }, { jp: 'ã‘', romaji: 'ke', kr: 'ì¼€' }, { jp: 'ã“', romaji: 'ko', kr: 'ì½”' },
            // sa, shi, su, se, so
            { jp: 'ã•', romaji: 'sa', kr: 'ì‚¬' }, { jp: 'ã—', romaji: 'shi', kr: 'ì‹œ' }, { jp: 'ã™', romaji: 'su', kr: 'ìŠ¤' }, { jp: 'ã›', romaji: 'se', kr: 'ì„¸' }, { jp: 'ã', romaji: 'so', kr: 'ì†Œ' },
            // ta, chi, tsu, te, to
            { jp: 'ãŸ', romaji: 'ta', kr: 'íƒ€' }, { jp: 'ã¡', romaji: 'chi', kr: 'ì¹˜' }, { jp: 'ã¤', romaji: 'tsu', kr: 'ì¸ ' }, { jp: 'ã¦', romaji: 'te', kr: 'í…Œ' }, { jp: 'ã¨', romaji: 'to', kr: 'í† ' },
            // na, ni, nu, ne, no
            { jp: 'ãª', romaji: 'na', kr: 'ë‚˜' }, { jp: 'ã«', romaji: 'ni', kr: 'ë‹ˆ' }, { jp: 'ã¬', romaji: 'nu', kr: 'ëˆ„' }, { jp: 'ã­', romaji: 'ne', kr: 'ë„¤' }, { jp: 'ã®', romaji: 'no', kr: 'ë…¸' },
            // ha, hi, fu, he, ho
            { jp: 'ã¯', romaji: 'ha', kr: 'í•˜' }, { jp: 'ã²', romaji: 'hi', kr: 'íˆ' }, { jp: 'ãµ', romaji: 'fu', kr: 'í›„' }, { jp: 'ã¸', romaji: 'he', kr: 'í—¤' }, { jp: 'ã»', romaji: 'ho', kr: 'í˜¸' },
            // ma, mi, mu, me, mo
            { jp: 'ã¾', romaji: 'ma', kr: 'ë§ˆ' }, { jp: 'ã¿', romaji: 'mi', kr: 'ë¯¸' }, { jp: 'ã‚€', romaji: 'mu', kr: 'ë¬´' }, { jp: 'ã‚', romaji: 'me', kr: 'ë©”' }, { jp: 'ã‚‚', romaji: 'mo', kr: 'ëª¨' },
            // ya, yu, yo
            { jp: 'ã‚„', romaji: 'ya', kr: 'ì•¼' }, { jp: '', romaji: '', kr: '' }, { jp: 'ã‚†', romaji: 'yu', kr: 'ìœ ' }, { jp: '', romaji: '', kr: '' }, { jp: 'ã‚ˆ', romaji: 'yo', kr: 'ìš”' },
            // ra, ri, ru, re, ro
            { jp: 'ã‚‰', romaji: 'ra', kr: 'ë¼' }, { jp: 'ã‚Š', romaji: 'ri', kr: 'ë¦¬' }, { jp: 'ã‚‹', romaji: 'ru', kr: 'ë£¨' }, { jp: 'ã‚Œ', romaji: 're', kr: 'ë ˆ' }, { jp: 'ã‚', romaji: 'ro', kr: 'ë¡œ' },
            // wa, wo
            { jp: 'ã‚', romaji: 'wa', kr: 'ì™€' }, { jp: '', romaji: '', kr: '' }, { jp: '', romaji: '', kr: '' }, { jp: '', romaji: '', kr: '' }, { jp: 'ã‚’', romaji: 'wo', kr: 'ì˜¤' },
            // n
            { jp: 'ã‚“', romaji: 'n', kr: 'ì‘' }, { jp: '', romaji: '', kr: '' }, { jp: '', romaji: '', kr: '' }, { jp: '', romaji: '', kr: '' }, { jp: '', romaji: '', kr: '' },
        ];
        
        const dakuonCharts = [
            { title: 'ã‹í–‰ â†’ ãŒí–‰ (g)', data: [ { jp: 'ãŒ', ro: 'ga'}, { jp: 'ã', ro: 'gi'}, { jp: 'ã', ro: 'gu'}, { jp: 'ã’', ro: 'ge'}, { jp: 'ã”', ro: 'go'} ] },
            { title: 'ã•í–‰ â†’ ã–í–‰ (z)', data: [ { jp: 'ã–', ro: 'za'}, { jp: 'ã˜', ro: 'ji'}, { jp: 'ãš', ro: 'zu'}, { jp: 'ãœ', ro: 'ze'}, { jp: 'ã', ro: 'zo'} ] },
            { title: 'ãŸí–‰ â†’ ã í–‰ (d)', data: [ { jp: 'ã ', ro: 'da'}, { jp: 'ã¢', ro: 'ji'}, { jp: 'ã¥', ro: 'zu'}, { jp: 'ã§', ro: 'de'}, { jp: 'ã©', ro: 'do'} ] },
            { title: 'ã¯í–‰ â†’ ã°í–‰ (b)', data: [ { jp: 'ã°', ro: 'ba'}, { jp: 'ã³', ro: 'bi'}, { jp: 'ã¶', ro: 'bu'}, { jp: 'ã¹', ro: 'be'}, { jp: 'ã¼', ro: 'bo'} ] },
            { title: 'ã¯í–‰ â†’ ã±í–‰ (p)', data: [ { jp: 'ã±', ro: 'pa'}, { jp: 'ã´', ro: 'pi'}, { jp: 'ã·', ro: 'pu'}, { jp: 'ãº', ro: 'pe'}, { jp: 'ã½', ro: 'po'} ] }
        ];

        const yoonCharts = [
            {
                title: 'ì²­ìŒ',
                data: [
                    { jp: 'ãã‚ƒ', ro: 'kya' }, { jp: 'ãã‚…', ro: 'kyu' }, { jp: 'ãã‚‡', ro: 'kyo' },
                    { jp: 'ã—ã‚ƒ', ro: 'sha' }, { jp: 'ã—ã‚…', ro: 'shu' }, { jp: 'ã—ã‚‡', ro: 'sho' },
                    { jp: 'ã¡ã‚ƒ', ro: 'cha' }, { jp: 'ã¡ã‚…', ro: 'chu' }, { jp: 'ã¡ã‚‡', ro: 'cho' },
                    { jp: 'ã«ã‚ƒ', ro: 'nya' }, { jp: 'ã«ã‚…', ro: 'nyu' }, { jp: 'ã«ã‚‡', ro: 'nyo' },
                    { jp: 'ã²ã‚ƒ', ro: 'hya' }, { jp: 'ã²ã‚…', ro: 'hyu' }, { jp: 'ã²ã‚‡', ro: 'hyo' },
                    { jp: 'ã¿ã‚ƒ', ro: 'mya' }, { jp: 'ã¿ã‚…', ro: 'myu' }, { jp: 'ã¿ã‚‡', ro: 'myo' },
                    { jp: 'ã‚Šã‚ƒ', ro: 'rya' }, { jp: 'ã‚Šã‚…', ro: 'ryu' }, { jp: 'ã‚Šã‚‡', ro: 'ryo' },
                ]
            },
            {
                title: 'íƒìŒ',
                data: [
                    { jp: 'ãã‚ƒ', ro: 'gya' }, { jp: 'ãã‚…', ro: 'gyu' }, { jp: 'ãã‚‡', ro: 'gyo' },
                    { jp: 'ã˜ã‚ƒ', ro: 'ja' }, { jp: 'ã˜ã‚…', ro: 'ju' }, { jp: 'ã˜ã‚‡', ro: 'jo' },
                    { jp: 'ã³ã‚ƒ', ro: 'bya' }, { jp: 'ã³ã‚…', ro: 'byu' }, { jp: 'ã³ã‚‡', ro: 'byo' },
                ]
            },
            {
                title: 'ë°˜íƒìŒ',
                data: [
                    { jp: 'ã´ã‚ƒ', ro: 'pya' }, { jp: 'ã´ã‚…', ro: 'pyu' }, { jp: 'ã´ã‚‡', ro: 'pyo' },
                ]
            }
        ];

        const contentQuestions = [
            { question: "ê°€ì¥ ì¼ë°˜ì ì´ê³  ê³µì†í•œ 1ì¸ì¹­ ëŒ€ëª…ì‚¬ëŠ” ë¬´ì—‡ì¸ê°€ìš”?", options: ["ã‚ãŸã—", "ã¼ã", "ãŠã‚Œ", "ã‚ãŸãã—"], answer: "ã‚ãŸã—" },
            { question: "ì£¼ë¡œ ë‚¨ì í›„ë°°ë‚˜ ë™ë…„ë°°ì—ê²Œ ì‚¬ìš©í•˜ëŠ” í˜¸ì¹­ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ã¡ã‚ƒã‚“", "ãã‚“", "ã•ã‚“", "ã•ã¾"], answer: "ãã‚“" },
            { question: "ì‘ì€ 'ã£'ê°€ ë°›ì¹¨ì²˜ëŸ¼ ì“°ì´ëŠ” ë°œìŒ ê·œì¹™ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì¥ìŒ", "ë°œìŒ", "ì´‰ìŒ", "ì—°íƒ"], answer: "ì´‰ìŒ" },
            { question: "ë‘ ë‹¨ì–´ê°€ í•©ì³ì§ˆ ë•Œ ë’¤ ë‹¨ì–´ì˜ ì²«ì†Œë¦¬ê°€ íƒìŒìœ¼ë¡œ ë°”ë€ŒëŠ” í˜„ìƒì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì—°íƒ í˜„ìƒ", "ì¥ìŒ í˜„ìƒ", "ì´‰ìŒ í˜„ìƒ", "ë°œìŒ í˜„ìƒ"], answer: "ì—°íƒ í˜„ìƒ" },
            { question: "ì¡°ì‚¬ë¡œ ì“°ì¼ ë•Œ 'ã¯'ëŠ” ì–´ë–»ê²Œ ë°œìŒí•˜ë‚˜ìš”?", options: ["í•˜ (ha)", "ì™€ (wa)", "ì— (e)", "ì˜¤ (o)"], answer: "ì™€ (wa)" },
            { question: "ì¡°ì‚¬ë¡œ ì“°ì¼ ë•Œ 'ã¸'ëŠ” ì–´ë–»ê²Œ ë°œìŒí•˜ë‚˜ìš”?", options: ["í—¤ (he)", "í˜ (pe)", "ì— (e)", "ë„¤ (ne)"], answer: "ì— (e)" },
            { question: "ì¼ë³¸ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì¸ê°€ìš”?", options: ["ì˜¤ì‚¬ì¹´", "êµí† ", "ì‚¿í¬ë¡œ", "ë„ì¿„"], answer: "ë„ì¿„" },
            { question: "ì¼ë³¸ì˜ í™”í ë‹¨ìœ„ëŠ” ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì›", "ë‹¬ëŸ¬", "ì—”", "ìœ„ì•ˆ"], answer: "ì—”" },
            { question: "ì¼ë³¸ì˜ ì†Œë¹„ì„¸ëŠ” ëª‡ %ì¸ê°€ìš”?", options: ["5%", "8%", "10%", "12%"], answer: "10%" },
            { question: "ì¼ë³¸ì—ì„œ ê°€ì¥ ë†’ì€ ì‚°ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["í•œë¼ì‚°", "ì—ë² ë ˆìŠ¤íŠ¸", "í›„ì§€ì‚°", "ë°±ë‘ì‚°"], answer: "í›„ì§€ì‚°" },
            { question: "ì‚¿í¬ë¡œ ëˆˆ ì¶•ì œê°€ ì—´ë¦¬ëŠ” ì§€ì—­ì€ ì–´ë””ì¸ê°€ìš”?", options: ["í˜¼ìŠˆ", "ê·œìŠˆ", "ì‹œì½”ì¿ ", "í™‹ì¹´ì´ë„"], answer: "í™‹ì¹´ì´ë„" },
            { question: "ì¼ë³¸ì˜ í–‰ì •êµ¬ì—­(ë„ë„ë¶€í˜„)ì€ ì´ ëª‡ ê°œì¸ê°€ìš”?", options: ["42ê°œ", "45ê°œ", "47ê°œ", "50ê°œ"], answer: "47ê°œ" }
        ];

        // Populate Vocabulary
        const vocabContainer = document.querySelector('#vocab .grid');
        vocabulary.sort((a, b) => a.jp.localeCompare(b.jp, 'ja')).forEach(word => {
            const card = document.createElement('div');
            card.className = 'bg-white p-4 rounded-lg shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-col justify-center items-center text-center';
            card.innerHTML = `
                <p class="text-3xl font-bold text-blue-500">${word.jp}</p>
                <p class="text-sm text-gray-500">${word.romaji}</p>
                <p class="mt-2 text-lg font-semibold text-gray-800">${word.kr}</p>
            `;
            vocabContainer.appendChild(card);
        });

        // Populate Phrases
        const phrasesContainer = document.querySelector('#phrases-greetings');
        phrases.forEach(phrase => {
            const item = document.createElement('div');
            item.className = 'bg-white p-5 rounded-lg shadow-md flex items-center justify-between flex-wrap';
            item.innerHTML = `
                <div class="mb-2 sm:mb-0">
                    <p class="text-xl font-bold text-blue-500">${phrase.jp}</p>
                    <p class="text-md text-gray-500">${phrase.romaji}</p>
                </div>
                <p class="text-lg font-semibold text-right w-full sm:w-auto">${phrase.kr}</p>
            `;
            phrasesContainer.appendChild(item);
        });
        
        // Populate Hiragana Chart
        const hiraganaContainer = document.getElementById('hiragana-grid');
        hiraganaChart.forEach(char => {
            const cell = document.createElement('div');
            if (char.jp) {
                cell.className = 'bg-blue-50 p-3 rounded-lg shadow-sm hover:shadow-md hover:bg-blue-100 transition-all duration-200 flex flex-col justify-center items-center cursor-pointer';
                cell.innerHTML = `
                    <p class="text-3xl font-bold text-blue-600">${char.jp}</p>
                    <p class="text-xs text-gray-500">${char.romaji}</p>
                    <p class="mt-1 text-md font-medium text-gray-700">${char.kr}</p>
                `;
            } else {
                cell.className = 'p-3 rounded-lg'; // Empty cell
            }
            hiraganaContainer.appendChild(cell);
        });

        // Populate Dakuon/Handakuon Chart
        const dakuonContainer = document.getElementById('dakuon-grid');
        dakuonCharts.forEach(chart => {
            const chartWrapper = document.createElement('div');
            const chartTitle = document.createElement('h4');
            chartTitle.className = 'text-lg font-semibold text-gray-700 mb-2';
            chartTitle.textContent = chart.title;

            const grid = document.createElement('div');
            grid.className = 'hiragana-grid-container';

            chart.data.forEach(char => {
                const cell = document.createElement('div');
                cell.className = 'bg-blue-50 p-3 rounded-lg shadow-sm hover:shadow-md hover:bg-blue-100 transition-all duration-200 flex flex-col justify-center items-center cursor-pointer';
                cell.innerHTML = `
                    <p class="text-3xl font-bold text-blue-600">${char.jp}</p>
                    <p class="text-xs text-gray-500">${char.ro}</p>
                `;
                grid.appendChild(cell);
            });
            
            chartWrapper.appendChild(chartTitle);
            chartWrapper.appendChild(grid);
            dakuonContainer.appendChild(chartWrapper);
        });
        
        // Populate Yoon Chart
        const yoonContainer = document.getElementById('yoon-grid');
        yoonCharts.forEach(chart => {
            const chartWrapper = document.createElement('div');
            const chartTitle = document.createElement('h4');
            chartTitle.className = 'text-lg font-semibold text-gray-700 mb-2';
            chartTitle.textContent = chart.title;
            
            const grid = document.createElement('div');
            grid.className = 'yoon-grid-container';

            chart.data.forEach(char => {
                const cell = document.createElement('div');
                cell.className = 'bg-blue-50 p-2 rounded-lg shadow-sm hover:shadow-md hover:bg-blue-100 transition-all duration-200 flex flex-col justify-center items-center cursor-pointer';
                cell.innerHTML = `
                    <p class="text-2xl font-bold text-blue-600">${char.jp}</p>
                    <p class="text-xs text-gray-500">${char.ro}</p>
                `;
                grid.appendChild(cell);
            });
            
            chartWrapper.appendChild(chartTitle);
            chartWrapper.appendChild(grid);
            yoonContainer.appendChild(chartWrapper);
        });

        // Populate Map Locations
        const mapContainer = document.getElementById('map-locations');
        mapLocations.forEach(loc => {
            const li = document.createElement('li');
            li.className = 'flex items-start';
            li.innerHTML = `
                <span class="text-blue-500 mr-2 pt-1">ğŸ“</span>
                <span><strong>${loc.name}:</strong> ${loc.feature}</span>
            `;
            mapContainer.appendChild(li);
        });

        function changeTab(tabName) {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            document.querySelector(`.tab-btn[onclick="changeTab('${tabName}')"]`).classList.add('active');

            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'test') {
                showTestSelection();
            }
        }

        // Number Converter Function (Extended to 1-999)
        function convertNumber() {
            const input = parseInt(document.getElementById('number-input').value);
            const resultEl = document.getElementById('number-result');

            if (isNaN(input) || input < 1 || input > 999) {
                resultEl.textContent = '1ë¶€í„° 999ê¹Œì§€ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
                return;
            }

            const units = {
                1: { hiragana: 'ã„ã¡', romaji: 'ichi', kr: 'ì´ì°Œ' },
                2: { hiragana: 'ã«', romaji: 'ni', kr: 'ë‹ˆ' },
                3: { hiragana: 'ã•ã‚“', romaji: 'san', kr: 'ìƒ' },
                4: { hiragana: 'ã‚ˆã‚“', romaji: 'yon', kr: 'ìš©' }, // Prefer yon/shi variants as per data
                5: { hiragana: 'ã”', romaji: 'go', kr: 'ê³ ' },
                6: { hiragana: 'ã‚ã', romaji: 'roku', kr: 'ë¡œê¾¸' },
                7: { hiragana: 'ãªãª', romaji: 'nana', kr: 'ë‚˜ë‚˜' }, // Prefer nana/shichi
                8: { hiragana: 'ã¯ã¡', romaji: 'hachi', kr: 'í•˜ì°Œ' },
                9: { hiragana: 'ãã‚…ã†', romaji: 'kyuu', kr: 'í-' },
                0: { hiragana: '', romaji: '', kr: '' }
            };

            const tens = {
                1: { hiragana: 'ã˜ã‚…ã†', romaji: 'juu', kr: 'ì¥¬-' },
                2: { hiragana: 'ã«ã˜ã‚…ã†', romaji: 'nijuu', kr: 'ë‹ˆì¥¬-' },
                3: { hiragana: 'ã•ã‚“ã˜ã‚…ã†', romaji: 'sanjuu', kr: 'ì‚°ì¥¬-' },
                4: { hiragana: 'ã‚ˆã‚“ã˜ã‚…ã†', romaji: 'yonjuu', kr: 'ìš˜ì¥¬-' },
                5: { hiragana: 'ã”ã˜ã‚…ã†', romaji: 'gojuu', kr: 'ê³ ì¥¬-' },
                6: { hiragana: 'ã‚ãã˜ã‚…ã†', romaji: 'rokujuu', kr: 'ë¡œê¾¸ì¥¬-' },
                7: { hiragana: 'ãªãªã˜ã‚…ã†', romaji: 'nanajuu', kr: 'ë‚˜ë‚˜ì¥¬-' },
                8: { hiragana: 'ã¯ã¡ã˜ã‚…ã†', romaji: 'hachijuu', kr: 'í•˜ì°Œì¥¬-' },
                9: { hiragana: 'ãã‚…ã†ã˜ã‚…ã†', romaji: 'kyuujuu', kr: 'í-ì¥¬-' },
                0: { hiragana: '', romaji: '', kr: '' }
            };

            const hundreds = {
                1: { hiragana: 'ã²ã‚ƒã', romaji: 'hyaku', kr: 'í–ê¾¸' },
                2: { hiragana: 'ã«ã²ã‚ƒã', romaji: 'nihyaku', kr: 'ë‹ˆí–ê¾¸' },
                3: { hiragana: 'ã•ã‚“ã³ã‚ƒã', romaji: 'sanbyaku', kr: 'ì‚°ëµ¤ê¾¸' }, // Special: byaku
                4: { hiragana: 'ã‚ˆã‚“ã²ã‚ƒã', romaji: 'yonhyaku', kr: 'ìš˜í–ê¾¸' },
                5: { hiragana: 'ã”ã²ã‚ƒã', romaji: 'gohyaku', kr: 'ê³ í–ê¾¸' },
                6: { hiragana: 'ã‚ã£ã´ã‚ƒã', romaji: 'roppyaku', kr: 'ë¡œë½€ê¾¸' }, // Special: ppyaku
                7: { hiragana: 'ãªãªã²ã‚ƒã', romaji: 'nanahyaku', kr: 'ë‚˜ë‚˜í–ê¾¸' },
                8: { hiragana: 'ã¯ã£ã´ã‚ƒã', romaji: 'happyaku', kr: 'í•˜ë½€ê¾¸' }, // Special: ppyaku
                9: { hiragana: 'ãã‚…ã†ã²ã‚ƒã', romaji: 'kyuu hyaku', kr: 'í-í–ê¾¸' },
                0: { hiragana: '', romaji: '', kr: '' }
            };

            let hiraganaStr = '';
            let romajiStr = '';
            let krStr = '';

            const num = input.toString().padStart(3, '0');
            const h = parseInt(num[0]);
            const t = parseInt(num[1]);
            const u = parseInt(num[2]);

            // Hundreds
            if (h > 0) {
                hiraganaStr += hundreds[h].hiragana;
                romajiStr += hundreds[h].romaji;
                krStr += hundreds[h].kr;
            }

            // Tens
            if (t > 0) {
                if (h > 0) {
                    hiraganaStr += '';
                    romajiStr += ' ';
                    krStr += ' ';
                }
                hiraganaStr += tens[t].hiragana;
                romajiStr += tens[t].romaji;
                krStr += tens[t].kr;
            }

            // Units
            if (u > 0) {
                if (h > 0 || t > 0) {
                    hiraganaStr += '';
                    romajiStr += '';
                    krStr += '';
                }
                hiraganaStr += units[u].hiragana;
                romajiStr += units[u].romaji;
                krStr += units[u].kr;
            }

            // For numbers <10, direct unit
            if (input < 10) {
                hiraganaStr = units[input].hiragana;
                romajiStr = units[input].romaji;
                krStr = units[input].kr;
            }

            // Special cases for 4,7,9 in units/tens if needed, but using preferred from data
            resultEl.innerHTML = `<strong>íˆë¼ê°€ë‚˜:</strong> ${hiraganaStr}<br><strong>ë¡œë§ˆì§€:</strong> ${romajiStr}<br><strong>í•œêµ­ì–´:</strong> ${krStr}`;
        }

        // --- Test Feature Logic ---

        const testSelectionEl = document.getElementById('test-selection');
        const quizContainerEl = document.getElementById('quiz-container');
        const resultContainerEl = document.getElementById('result-container');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const retryBtn = document.getElementById('retry-btn');
        const quizTitleEl = document.getElementById('quiz-title');

        let currentTestType = '';
        let score = 0;
        let currentQuestionIndex = 0;
        let questions = [];
        const QUIZ_LENGTH = 10;

        // Fisher-Yates shuffle
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateHiraganaQuestions() {
            const validChars = hiraganaChart.filter(c => c.jp);
            const shuffled = shuffleArray([...validChars]);
            const selected = shuffled.slice(0, QUIZ_LENGTH);
            
            return selected.map(q => {
                const incorrectOptions = shuffleArray(validChars.filter(c => c.jp !== q.jp))
                                            .slice(0, 3)
                                            .map(c => c.romaji);
                return {
                    question: q.jp,
                    answer: q.romaji,
                    options: shuffleArray([q.romaji, ...incorrectOptions])
                };
            });
        }

        function generateVocabQuestions() {
            const shuffled = shuffleArray([...vocabulary]);
            const selected = shuffled.slice(0, QUIZ_LENGTH);

            return selected.map(q => {
                const isJpToKr = Math.random() > 0.5;
                const question = isJpToKr ? q.jp : q.kr;
                const answer = isJpToKr ? q.kr : q.jp;

                const incorrectOptions = shuffleArray(vocabulary.filter(v => v.jp !== q.jp))
                                            .slice(0, 3)
                                            .map(v => isJpToKr ? v.kr : v.jp);

                return {
                    question,
                    answer,
                    options: shuffleArray([answer, ...incorrectOptions])
                };
            });
        }

        function generateContentQuestions() {
            return shuffleArray([...contentQuestions]).slice(0, QUIZ_LENGTH);
        }

        function startTest(type) {
            currentTestType = type;
            score = 0;
            currentQuestionIndex = 0;

            if (type === 'hiragana') {
                questions = generateHiraganaQuestions();
                quizTitleEl.textContent = 'íˆë¼ê°€ë‚˜ í…ŒìŠ¤íŠ¸';
            } else if (type === 'vocab') {
                questions = generateVocabQuestions();
                quizTitleEl.textContent = 'ë‹¨ì–´ í…ŒìŠ¤íŠ¸';
            } else if (type === 'content') {
                questions = generateContentQuestions();
                quizTitleEl.textContent = 'í•™ìŠµ ë‚´ìš© í…ŒìŠ¤íŠ¸';
            }

            testSelectionEl.classList.add('hidden');
            resultContainerEl.classList.add('hidden');
            quizContainerEl.classList.remove('hidden');

            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const q = questions[currentQuestionIndex];
            const progressEl = document.getElementById('quiz-progress');
            const questionEl = document.getElementById('quiz-question');
            const optionsEl = document.getElementById('quiz-options');
            const feedbackEl = document.getElementById('quiz-feedback');

            progressEl.textContent = `ë¬¸ì œ ${currentQuestionIndex + 1} / ${questions.length}`;
            questionEl.textContent = q.question;
            optionsEl.innerHTML = '';
            feedbackEl.textContent = '';
            nextQuestionBtn.classList.add('hidden');

            q.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.className = 'quiz-option p-4 border-2 rounded-lg text-lg hover:bg-gray-100 transition-colors';
                button.onclick = () => checkAnswer(button, option);
                optionsEl.appendChild(button);
            });
        }
        
        function checkAnswer(button, selectedOption) {
            const q = questions[currentQuestionIndex];
            const isCorrect = selectedOption === q.answer;
            const feedbackEl = document.getElementById('quiz-feedback');
            const optionsEl = document.getElementById('quiz-options');

            if (isCorrect) {
                score++;
                button.classList.add('correct');
                feedbackEl.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                feedbackEl.className = 'mt-4 text-center font-bold text-green-500';
            } else {
                button.classList.add('incorrect');
                feedbackEl.textContent = `ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ '${q.answer}' ì…ë‹ˆë‹¤.`;
                feedbackEl.className = 'mt-4 text-center font-bold text-red-500';
            }

            // Disable all option buttons
            Array.from(optionsEl.children).forEach(btn => {
                btn.disabled = true;
                // Show correct answer if wrong one was picked
                if (!isCorrect && btn.textContent === q.answer) {
                    btn.classList.add('correct');
                }
            });

            nextQuestionBtn.classList.remove('hidden');
        }

        nextQuestionBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            displayQuestion();
        });

        function showResults() {
            quizContainerEl.classList.add('hidden');
            resultContainerEl.classList.remove('hidden');
            
            const scoreEl = document.getElementById('result-score');
            const messageEl = document.getElementById('result-message');

            scoreEl.textContent = `${score} / ${questions.length}`;
            
            let message = '';
            const percentage = (score / questions.length) * 100;
            if (percentage === 100) {
                message = 'ì™„ë²½í•´ìš”! ëŒ€ë‹¨í•©ë‹ˆë‹¤! ğŸ’¯';
            } else if (percentage >= 70) {
                message = 'í›Œë¥­í•´ìš”! ì •ë§ ì˜í•˜ì…¨ì–´ìš”. ğŸ‘';
            } else if (percentage >= 50) {
                message = 'ì¢‹ì•„ìš”! ì¡°ê¸ˆë§Œ ë” ë³µìŠµí•´ë³¼ê¹Œìš”?';
            } else {
                message = 'ê´œì°®ì•„ìš”! ë‹¤ì‹œ í•œë²ˆ ë„ì „í•´ë³´ì„¸ìš”. ğŸ˜Š';
            }
            messageEl.textContent = message;
        }

        retryBtn.addEventListener('click', () => startTest(currentTestType));

        function showTestSelection() {
            resultContainerEl.classList.add('hidden');
            quizContainerEl.classList.add('hidden');
            testSelectionEl.classList.remove('hidden');
        }
    </script>
</body>
</html>
